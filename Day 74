 Electron.js Fundamentals

Today's Focus: Desktop Application Development
What I Learned: Building cross-platform desktop apps. Learned:

Electron architecture (main vs renderer)

Window management

Menu system

File system access

Native dialogs

Auto-updates

Practice Example: Basic Electron App
// main.js - Main process
const { app, BrowserWindow, Menu, ipcMain, dialog } = require('electron');
const path = require('path');
const fs = require('fs');

let mainWindow;

function createWindow() {
  mainWindow = new BrowserWindow({
    width: 1200,
    height: 800,
    webPreferences: {
      nodeIntegration: true,
      contextIsolation: false,
      enableRemoteModule: true,
    },
    icon: path.join(__dirname, 'assets/icon.png'),
  });

  // Load app
  if (process.env.NODE_ENV === 'development') {
    mainWindow.loadURL('http://localhost:3000');
    mainWindow.webContents.openDevTools();
  } else {
    mainWindow.loadFile(path.join(__dirname, 'build/index.html'));
  }

  // Create menu
  const menuTemplate = [
    {
      label: 'File',
      submenu: [
        {
          label: 'Open File',
          accelerator: 'CmdOrCtrl+O',
          click: () => openFile(),
        },
        {
          label: 'Save',
          accelerator: 'CmdOrCtrl+S',
          click: () => saveFile(),
        },
        { type: 'separator' },
        {
          label: 'Exit',
          accelerator: 'CmdOrCtrl+Q',
          click: () => app.quit(),
        },
      ],
    },
    {
      label: 'Edit',
      submenu: [
        { role: 'undo' },
        { role: 'redo' },
        { type: 'separator' },
        { role: 'cut' },
        { role: 'copy' },
        { role: 'paste' },
      ],
    },
    {
      label: 'View',
      submenu: [
        { role: 'reload' },
        { role: 'forceReload' },
        { role: 'toggleDevTools' },
        { type: 'separator' },
        { role: 'resetZoom' },
        { role: 'zoomIn' },
        { role: 'zoomOut' },
        { type: 'separator' },
        { role: 'togglefullscreen' },
      ],
    },
    {
      label: 'Window',
      submenu: [
        { role: 'minimize' },
        { role: 'close' },
      ],
    },
  ];

  const menu = Menu.buildFromTemplate(menuTemplate);
  Menu.setApplicationMenu(menu);

  mainWindow.on('closed', () => {
    mainWindow = null;
  });
}

app.whenReady().then(createWindow);

app.on('window-all-closed', () => {
  if (process.platform !== 'darwin') {
    app.quit();
  }
});

app.on('activate', () => {
  if (mainWindow === null) {
    createWindow();
  }
});

// IPC handlers
ipcMain.handle('open-file-dialog', async () => {
  const result = await dialog.showOpenDialog(mainWindow, {
    properties: ['openFile'],
    filters: [
      { name: 'Text Files', extensions: ['txt', 'md'] },
      { name: 'All Files', extensions: ['*'] },
    ],
  });

  if (!result.canceled && result.filePaths.length > 0) {
    const filePath = result.filePaths[0];
    const content = fs.readFileSync(filePath, 'utf-8');
    return { filePath, content };
  }
  return null;
});

ipcMain.handle('save-file-dialog', async (event, content) => {
  const result = await dialog.showSaveDialog(mainWindow, {
    filters: [
      { name: 'Text Files', extensions: ['txt'] },
      { name: 'Markdown Files', extensions: ['md'] },
    ],
  });

  if (!result.canceled) {
    fs.writeFileSync(result.filePath, content, 'utf-8');
    return result.filePath;
  }
  return null;
});

// Helper functions
function openFile() {
  mainWindow.webContents.send('open-file');
}

function saveFile() {
  mainWindow.webContents.send('save-file');
}
// renderer.js - Renderer process
const { ipcRenderer } = require('electron');

// DOM elements
const openBtn = document.getElementById('openBtn');
const saveBtn = document.getElementById('saveBtn');
const editor = document.getElementById('editor');
const status = document.getElementById('status');

// Open file
openBtn.addEventListener('click', async () => {
  try {
    const result = await ipcRenderer.invoke('open-file-dialog');
    if (result) {
      editor.value = result.content;
      status.textContent = `Opened: ${result.filePath}`;
    }
  } catch (error) {
    status.textContent = `Error: ${error.message}`;
  }
});

// Save file
saveBtn.addEventListener('click', async () => {
  try {
    const content = editor.value;
    const filePath = await ipcRenderer.invoke('save-file-dialog', content);
    if (filePath) {
      status.textContent = `Saved: ${filePath}`;
    }
  } catch (error) {
    status.textContent = `Error: ${error.message}`;
  }
});

// Listen for menu actions
ipcRenderer.on('open-file', () => {
  openBtn.click();
});

ipcRenderer.on('save-file', () => {
  saveBtn.click();
});
